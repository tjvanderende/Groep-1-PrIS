<html><head><link rel="import" href="../polymer/polymer.html">

<script>!function(){window.Nebula=window.Nebula||{};Nebula.DialogBehavior={properties:{allowCancel:{type:Boolean,value:!0},opened:{type:Boolean,reflectToAttribute:!0,notify:!0,value:!1},result:{type:Object,notify:!0}},observers:["__dialogOnOpenedChanged(opened)"],listeners:{transitionend:"__dialogOnTransitionEnd",tap:"__dialogOnTap"},__dialogOnKeyDown:function(e){27===(e.keyCode||e.which)&&this.allowCancel&&(e.preventDefault(),e.stopPropagation(),this.cancel())},__dialogOnTap:function(e){this.tagName===e.target.tagName&&this.allowCancel&&(e.preventDefault(),e.stopPropagation(),this.cancel())},__dialogOnTransitionEnd:function(e){"opacity"===e.propertyName&&(this.opened?this.fire("opened",null,{bubbles:!1}):this.fire("closed",null,{bubbles:!1}))},__dialogOnOpenedChanged:function(e){void 0!==e&&(e?(this.__dialogActiveElement=document.activeElement,this.set("result",void 0),this.listen(document.body,"keydown","__dialogOnKeyDown")):(this.__dialogActiveElement&&this.__dialogActiveElement.focus(),this.unlisten(document.body,"keydown","__dialogOnKeyDown")))},cancel:function(){this.opened&&(this.set("result",void 0),this.set("opened",!1))},close:function(e){this.opened&&(this.set("result",e),this.set("opened",!1))},show:function(){return new Promise(function(e){this.parentNode||(this.__dialogAppended=!0,document.body.appendChild(this));var t=function(){this.removeEventListener("closed",t),this.__dialogAppended&&(this.__dialogAppended=!1,document.body.removeChild(this)),e(this.result)}.bind(this);this.addEventListener("closed",t),setTimeout(function(){this.set("opened",!0)}.bind(this))}.bind(this))}}}();</script></head><body></body></html>