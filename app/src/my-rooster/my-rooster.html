<link rel="import" href="../../bower_components/polymer/polymer.html">
<script src="../../bower_components/webcomponentsjs/webcomponents.js"></script>

<link rel='import' href='../../bower_components/fullcalendar/dist/fullcalendar-styles.html' />
<link rel="import" href="../../bower_components/nebula-dialog/nebula-dialog.html">

<script src='../../bower_components/jquery/dist/jquery.min.js'></script>
<script src='../../bower_components/moment/min/moment.min.js'></script>
<script src='../../bower_components/fullcalendar/dist/fullcalendar.js'></script>

<dom-module id="my-rooster">
    <template>
      <style include="fullcalendar-styles">
      .modalBackground{
        background-color: white;
        float: left;
      }
      .elementsInModal{
        padding: 5px 5px 5px 5px;
      }
      .lesInfo{
        border: 1px solid black;
        padding: 2px;
        min-width: 150px;
        max-width: 200px;
        word-wrap: break-word;
        background-color: white;
        float: right;
      }
      .wrapper{
        width: 500px
      }
</style>
      <div id="calendar"></div>
      <nebula-dialog id="dialog">
     <div class="wraper">
    <div class="modalBackground">
      <div class="elementsInModal">
          <h2>Test</h2>
      </div>
    </div>
    <div class="lesInfo">
      Vak:  <br>
      Docent: <br>
      Klascode: <br>
      Begint om: <br>
      Eindigt om:
    </div>
  </div>
    </nebula-dialog>
      <iron-ajax url="bestand.json" handle-as="json" auto on-response="handleResp"></iron-ajax>
    </template>

    <script>
        Polymer({

            is: 'my-rooster',

            properties: {},

            ready: function() {

            },

            handleResp: function(request) {
                var self = this;
                $(this.$.calendar).fullCalendar({
                    header: {
                        left: 'prev,next today',
                        center: 'title',
                        right: 'month,basicWeek,basicDay'
                    },
                    editable: false,
                    eventLimit: true, // allow "more" link when too many events
                    events: request.detail.response,

                    eventClick: function(calEvent, jsEvent, view) {
                        console.log(calEvent);
                        self.$.dialog.show();
                    }
                });
            }


        });
    </script>
</dom-module>
