<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">

<script src="../../bower_components/webcomponentsjs/webcomponents.js"></script>

<link rel="import" href="../../bower_components/nebula-dialog/nebula-dialog.html">
<link rel="import" href="../../bower_components/iron-data-table/iron-data-table.html" />

<dom-module id="my-presentie">
    <template is="dom-bind">
      <style is="custom-style">
        paper-tabs[no-bar] paper-tab.iron-selected {
          background: white;
        }
        .inner-tab.iron-selected {
          background: white;
          padding:15px;
          min-height: 400px;
        }
      </style>

    <nebula-dialog id="dialog">
        <div class="wraper">
            <div class="modalBackground">
                <div class="elementsInModal">
                    <h2>Test</h2>
                </div>
            </div>
            <div class="lesInfo">
                Vak: <br> Docent: <br> Klascode: <br> Begint om: <br> Eindigt om:
            </div>
        </div>
    </nebula-dialog>
    <iron-ajax url="/docent" handle-as="json" on-response="handler" auto></iron-ajax>
    <paper-tabs selected="{{selected}}" scrollable no-bar>
      <template is="dom-repeat" items="{{klassen}}">
        <paper-tab>
          {{item.klasNaam}}
        </paper-tab>
      </template>


    </paper-tabs>
    <iron-pages selected="{{selected}}">
        <template is="dom-repeat" items="{{klassen}}" as="klas">
          <div class="inner-tab">
            <iron-data-table id="presentielijst" items="{{klas.studenten}}" selection-enabled>
              <data-table-column name="Email">
                <template>[[item.email]]</template>
              </data-table-column>
              <data-table-column name="Nummer">
                  <template>[[item.nummer]]</template>
              </data-table-column>
                <data-table-column name="Percentage">
                    <template>[[item.studentPrecentie]]</template>
                </data-table-column>
                <data-table-column name="Selecteer">
                    <template><a on-tap="load_student" href="/#/systeem/account/?student={{item.nummer}}">selecteer</a></template>
                </data-table-column>
            </iron-data-table>

          </div>
        </template>


    </iron-pages>
    </template>

    <script>
            Polymer({

                is: 'my-presentie',

                properties: {
                    selected: {
                        type: Number,
                        value: 0
                    },
                    studentNummer: {
                        type: Number,
                        value: 0,
                        notify: true
                    }
                },
                load_student: function(e){
                  console.log(e.target);
                },
                handler: function(request){
                    this.klassen = request.detail.response;

                 /*   var table = this.$.presentielijst;

                    table.addEventListener('selecting-item', function(e) {
                        e.preventDefault(); // this will cancel the default selection behavior

                    });*/
                },
                testHandler:function(request){
                    console.log(request.detail.response);
                },
                ready: function() {

                },

            });

    </script>
</dom-module>
